# Statistics Service

**Технологии**: Go, ClickHouse  
**Назначение**: Сбор и анализ статистических данных (лайки, просмотры, количество комментариев и т.д.).

## Зона ответственности

1. Принимать события из Kafka о взаимодействиях (лайки, просмотры, новые посты/комментарии).
2. Сохранять данные в ClickHouse (сырые события или агрегированные показатели).
3. Предоставлять интерфейс для получения статистики (через REST или gRPC):
   - Количество лайков/просмотров конкретного поста,
   - Количество комментариев,
   - Статистика по пользователям (сколько постов/комментариев создали, сколько лайков поставили и т.д.).

## Границы

- Не возвращает сами посты или комментарии, только **агрегированные** цифры (для отображения или аналитики).
- Не занимается аутентификацией — получает user_id/post_id/и т.п. в событиях от других сервисов или через API Gateway.

## Данные

- **База данных**: ClickHouse.
- Основные таблицы (подробности в [ER-диаграмме](../docs/er_statistics_service.md)):
  - `POST_STATS`
  - `COMMENT_STATS`
  - `USER_STATS`

## Основные интеграции

- **Kafka**: Сервис подписывается на топики (`post_events`, `user_events`) и обрабатывает входящие события.
- **API Gateway**: Может вызывать методы `GET /api/v1/statistics/...`, чтобы показать пользователю статистику по постам, комментариям и т.д. Или тут межсерверная с помощью GRPC

